//https://github.com/daiying-zhang/jquery.jscrollbar
(function(e){function s(t,r,i){this.$node.css("overflow","hidden").addClass("jscrollbar").wrapInner(n.attr("id",this.plugID).css({width:t,height:r})),this.$con=e("#"+this.plugID),o.call(this,this.$node,t,r,i),l.call(this)}function o(t,n,s,o){u.call(this,n,s,o);var a=this.bars.split(""),f,l,c,h=0,p=a.length;for(;h<p;h++)c=a[h],f=i[c],l=i["xy".replace(c,"")].s,e("<div></div>").addClass(c).data("thumbType",c).css(l,o).append(e(r)[f.s](this.thumbSize[c]).data("type",c)).insertAfter(this.$con.css(l,"-="+(this.opt.position==="outer"?o:0)));this.opt.position==="inner"&&t.find(".x,.y").css("background","transparent")}function u(e,t,n){this.bars=a.call(this,e,t,n);var r=this.delta=(this.bars.length-1)*n,i=this.thumbSize={x:f.call(this,"x"),y:f.call(this,"y")};this.maxPos={x:e-i.x-r,y:t-i.y-r},this.maxSPos={x:this.scrollWidth-e+r,y:this.scrollHeight-t+r}}function a(e,t,n){var r=this.$con.clone().appendTo("body").width(e).height(t),i=this.opt.showXBar&&this.$con[0].scrollWidth>e,s=this.opt.showYBar&&this.$con[0].scrollHeight>t,o=0,u="",a=this.opt.position==="outer"?n:0;return i&&s?u="xy":i?(o=r.css({height:t-a,zIndex:-1})[0].scrollHeight,u="x"+(this.opt.showXBar&&o>t-a?"y":"")):s&&(o=r.css({width:e-a,zIndex:-1})[0].scrollWidth,u=(this.opt.showXBar&&o>e-a?"x":"")+"y"),this.scrollWidth=r[0].scrollWidth,this.scrollHeight=r[0].scrollHeight,r.remove(),u}function f(e){var t=i[e];return Math.max(20,Math.pow(this.$con[t.s]()-this.delta,2)/this.$con[0][t.ss])}function l(){var t=this;this.$node.on("mousedown",".thumb",function(e){return p.call(t,e,e.target),!1}).on("click",".x,.y",function(n){var r=0,s=n.target,o=e.data(s,"thumbType"),u=i[o];s===this&&(r=n["page"+o.toUpperCase()]-e(s).offset()[u.p],t.scrollTo(o,r/t.maxPos[o]*t.maxSPos[o]))}),e(document).unbind("mouseup.jsb").bind("mouseup.jsb",function(){e(this).unbind("mousemove.jsb")}),h.call(this),this.opt.position==="inner"&&c.call(this)}function c(){var e=this.$con;e.hover(function(){e.find(".x,.y").stop().animate({opacity:1},200)},function(){e.find(".x,.y").stop().animate({opacity:0},500)}).mouseout()}function h(){var t=this.node,n=this,r=null;this.opt.mouseEvent&&(r=function(t){t=t||window.event;var r=t.wheelDelta?t.wheelDelta/120:-t.detail/3;n.scrollBy(n.bars.length===2?"y":n.bars,-r*n.opt.mouseSpeed),e.event.fix(t).preventDefault()},t.addEventListener?(t.addEventListener("mousewheel",r),t.addEventListener("DOMMouseScroll",r)):t.onmousewheel=r)}function p(t,n){var r={X:t.pageX,Y:t.pageY},s=this,o={X:parseInt(e(n).css("left"))||0,Y:parseInt(e(n).css("top"))||0};e(document).bind("mousemove.jsb",function(t){var u=e.data(n,"type"),a=u.toUpperCase(),f=t["page"+a]-r[a],l=i[u].p,c=Math.min(Math.max(0,o[a]+f),s.maxPos[u]);e(n).css(l,c),s.scroll(u)})}function d(e,t,n,r,i){var s={x:this.getScrollPos("x"),y:this.getScrollPos("y")};this.$node.find(".x,.y").remove(),this.$con.css({width:n,height:r}),o.call(this,t,n,r,i);switch(e){case"relative":s.x&&this.scrollTo("x",s.x),s.y&&this.scrollTo("y",s.y);break;case"bottom":this.scrollTo("y",this.maxSPos.y);break;case"right":this.scrollTo("x",this.maxSPos.x);break;case"top":default:this.scroll()}}function v(e,t){var n=i[e],r=t||this.$con[0][n.sp],s=this.maxPos[e]*r/this.maxSPos[e];this.$node.find("."+e+" .thumb").css(n.p,s)}function m(e,t){this.node=e[0],this.$node=e,this.width=e.width(),this.height=e.height(),this.opt=t,this.plugID="jsb_"+Math.floor(Math.random()*9e3+1e3),s.call(this,this.width,this.height,t.width)}var t="jsb_data",n=e('<div class="jscrollbar" style="overflow: hidden"></div>'),r='<div class="thumb"></div>',i={x:{s:"width",p:"left",sp:"scrollLeft",ss:"scrollWidth"},y:{s:"height",p:"top",sp:"scrollTop",ss:"scrollHeight"}};m.fn=m.prototype,m.fn.update=function(e){var t=this.$node;d.call(this,e,t,this.width=t.width(),this.height=t.height(),this.opt.width),this.scroll()},m.fn.getThumbLocation=function(e){return parseFloat(this.$node.find("."+e+" .thumb").css(i[e].p))||0},m.fn.getScrollPos=function(e){return this.$con[0][i[e].sp]},m.fn.scroll=function(e){e===undefined&&(e="x",this.scroll("y")),this.$con[0][i[e].sp]=this.getThumbLocation(e)/this.maxPos[e]*this.maxSPos[e]},m.fn.scrollBy=function(e,t){this.scrollTo(e,this.$con[0][i[e].sp]+t)},m.fn.scrollTo=function(e,t){t=Math.max(Math.min(this.maxSPos[e],t),0),this.$con[0][i[e].sp]=t,this.$node.trigger("scroll",[e,t]),v.call(this,e,t)},e.fn.jscrollbar=function(n){if(typeof n=="string"){var r=this.data(t);return r.scrollTo([].slice.call(arguments,1)),r?r[n].apply(r,[].slice.call(arguments,1)):this}return n=e.extend({},{width:8,position:"inner",showXBar:!0,showYBar:!0,mouseEvent:!0,mouseSpeed:30},n),this.each(function(){var r=e.data(this,t);r||e.data(this,t,new m(e(this),n))})},e.fn.jscrollbar.version="2.0.0"})(jQuery)