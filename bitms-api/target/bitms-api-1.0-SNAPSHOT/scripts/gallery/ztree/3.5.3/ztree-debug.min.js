define("gallery/ztree/3.5.3/ztree-debug",["$"],function(n){n("gallery/ztree/3.5.3/zTree.css");var t=n("$");return function(n){var s={},l={},h={},a={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},v=function(n){var i=t.getRoot(n);i||(i={},t.setRoot(n,i));i[n.data.key.children]=[];i.expandTriggerFlag=!1;i.curSelectedList=[];i.noSelection=!0;i.createdNodes=[];i.zId=0;i._ver=(new Date).getTime()},y=function(n){var i=t.getCache(n);i||(i={},t.setCache(n,i));i.nodes=[];i.doms=[]},p=function(n){var t=n.treeObj,r=i.event;t.bind(r.NODECREATED,function(t,i,r){u.apply(n.callback.onNodeCreated,[t,i,r])});t.bind(r.CLICK,function(t,i,r,f,e){u.apply(n.callback.onClick,[i,r,f,e])});t.bind(r.EXPAND,function(t,i,r){u.apply(n.callback.onExpand,[t,i,r])});t.bind(r.COLLAPSE,function(t,i,r){u.apply(n.callback.onCollapse,[t,i,r])});t.bind(r.ASYNC_SUCCESS,function(t,i,r,f){u.apply(n.callback.onAsyncSuccess,[t,i,r,f])});t.bind(r.ASYNC_ERROR,function(t,i,r,f,e,o){u.apply(n.callback.onAsyncError,[t,i,r,f,e,o])})},w=function(n){var r=n.treeObj,t=i.event;r.unbind(t.NODECREATED).unbind(t.CLICK).unbind(t.EXPAND).unbind(t.COLLAPSE).unbind(t.ASYNC_SUCCESS).unbind(t.ASYNC_ERROR)},b=function(r){var e=r.target,s=t.getSetting(r.data.treeId),h="",v=null,c="",l="",y=null,a=null,f=null;if(u.eqs(r.type,"mousedown")?l="mousedown":u.eqs(r.type,"mouseup")?l="mouseup":u.eqs(r.type,"contextmenu")?l="contextmenu":u.eqs(r.type,"click")?u.eqs(e.tagName,"span")&&e.getAttribute("treeNode"+i.id.SWITCH)!==null?(h=(n(e).parent("li").get(0)||n(e).parentsUntil("li").parent().get(0)).id,c="switchNode"):(f=u.getMDom(s,e,[{tagName:"a",attrName:"treeNode"+i.id.A}]),f&&(h=(n(f).parent("li").get(0)||n(f).parentsUntil("li").parent().get(0)).id,c="clickNode")):u.eqs(r.type,"dblclick")&&(l="dblclick",f=u.getMDom(s,e,[{tagName:"a",attrName:"treeNode"+i.id.A}]),f&&(h=(n(f).parent("li").get(0)||n(f).parentsUntil("li").parent().get(0)).id,c="switchNode")),l.length>0&&h.length==0&&(f=u.getMDom(s,e,[{tagName:"a",attrName:"treeNode"+i.id.A}]),f&&(h=(n(f).parent("li").get(0)||n(f).parentsUntil("li").parent().get(0)).id)),h.length>0){v=t.getNodeCache(s,h);switch(c){case"switchNode":v.isParent?u.eqs(r.type,"click")||u.eqs(r.type,"dblclick")&&u.apply(s.view.dblClickExpand,[s.treeId,v],s.view.dblClickExpand)?y=o.onSwitchNode:c="":c="";break;case"clickNode":y=o.onClickNode}}switch(l){case"mousedown":a=o.onZTreeMousedown;break;case"mouseup":a=o.onZTreeMouseup;break;case"dblclick":a=o.onZTreeDblclick;break;case"contextmenu":a=o.onZTreeContextmenu}return{stop:!1,node:v,nodeEventType:c,nodeEventCallback:y,treeEventType:l,treeEventCallback:a}},k=function(n,i,r,f,e,o){if(r){var h=t.getRoot(n),s=n.data.key.children;r.level=i;r.tId=n.treeId+"_"+ ++h.zId;r.parentTId=f?f.tId:null;r[s]&&r[s].length>0?(typeof r.open=="string"&&(r.open=u.eqs(r.open,"true")),r.open=!!r.open,r.isParent=!0,r.zAsync=!0):(r.open=!1,typeof r.isParent=="string"&&(r.isParent=u.eqs(r.isParent,"true")),r.isParent=!!r.isParent,r.zAsync=!r.isParent);r.isFirstNode=e;r.isLastNode=o;r.getParentNode=function(){return t.getNodeCache(n,r.parentTId)};r.getPreNode=function(){return t.getPreNode(n,r)};r.getNextNode=function(){return t.getNextNode(n,r)};r.isAjaxing=!1;t.fixPIdKeyValue(n,r)}},f={bind:[p],unbind:[w],caches:[y],nodes:[k],proxys:[b],roots:[v],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},t={addNodeCache:function(n,i){t.getCache(n).nodes[t.getNodeCacheId(i.tId)]=i},getNodeCacheId:function(n){return n.substring(n.lastIndexOf("_")+1)},addAfterA:function(n){f.afterA.push(n)},addBeforeA:function(n){f.beforeA.push(n)},addInnerAfterA:function(n){f.innerAfterA.push(n)},addInnerBeforeA:function(n){f.innerBeforeA.push(n)},addInitBind:function(n){f.bind.push(n)},addInitUnBind:function(n){f.unbind.push(n)},addInitCache:function(n){f.caches.push(n)},addInitNode:function(n){f.nodes.push(n)},addInitProxy:function(n){f.proxys.push(n)},addInitRoot:function(n){f.roots.push(n)},addNodesData:function(n,t,i){var u=n.data.key.children;t[u]||(t[u]=[]);t[u].length>0&&(t[u][t[u].length-1].isLastNode=!1,r.setNodeLineIcos(n,t[u][t[u].length-1]));t.isParent=!0;t[u]=t[u].concat(i)},addSelectedNode:function(n,i){var r=t.getRoot(n);t.isSelectedNode(n,i)||r.curSelectedList.push(i)},addCreatedNode:function(n,i){if(!!n.callback.onNodeCreated||!!n.view.addDiyDom){var r=t.getRoot(n);r.createdNodes.push(i)}},addZTreeTools:function(n){f.zTreeTools.push(n)},exSetting:function(t){n.extend(!0,a,t)},fixPIdKeyValue:function(n,t){n.data.simpleData.enable&&(t[n.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[n.data.simpleData.idKey]:n.data.simpleData.rootPId)},getAfterA:function(){for(var n=0,t=f.afterA.length;n<t;n++)f.afterA[n].apply(this,arguments)},getBeforeA:function(){for(var n=0,t=f.beforeA.length;n<t;n++)f.beforeA[n].apply(this,arguments)},getInnerAfterA:function(){for(var n=0,t=f.innerAfterA.length;n<t;n++)f.innerAfterA[n].apply(this,arguments)},getInnerBeforeA:function(){for(var n=0,t=f.innerBeforeA.length;n<t;n++)f.innerBeforeA[n].apply(this,arguments)},getCache:function(n){return h[n.treeId]},getNextNode:function(n,i){var u,f,r,e;if(!i)return null;for(u=n.data.key.children,f=i.parentTId?i.getParentNode():t.getRoot(n),r=0,e=f[u].length-1;r<=e;r++)if(f[u][r]===i)return r==e?null:f[u][r+1];return null},getNodeByParam:function(n,i,r,u){var o,f,s,e;if(!i||!r)return null;for(o=n.data.key.children,f=0,s=i.length;f<s;f++){if(i[f][r]==u)return i[f];if(e=t.getNodeByParam(n,i[f][o],r,u),e)return e}return null},getNodeCache:function(n,i){if(!i)return null;var r=h[n.treeId].nodes[t.getNodeCacheId(i)];return r?r:null},getNodeName:function(n,t){var i=n.data.key.name;return""+t[i]},getNodeTitle:function(n,t){var i=n.data.key.title===""?n.data.key.name:n.data.key.title;return""+t[i]},getNodes:function(n){return t.getRoot(n)[n.data.key.children]},getNodesByParam:function(n,i,r,u){var o,e,f,s;if(!i||!r)return[];for(o=n.data.key.children,e=[],f=0,s=i.length;f<s;f++)i[f][r]==u&&e.push(i[f]),e=e.concat(t.getNodesByParam(n,i[f][o],r,u));return e},getNodesByParamFuzzy:function(n,i,r,u){var o,e,f,s;if(!i||!r)return[];for(o=n.data.key.children,e=[],f=0,s=i.length;f<s;f++)typeof i[f][r]=="string"&&i[f][r].indexOf(u)>-1&&e.push(i[f]),e=e.concat(t.getNodesByParamFuzzy(n,i[f][o],r,u));return e},getNodesByFilter:function(n,i,r,f,e){var c,s,o,l,h;if(!i)return f?null:[];for(c=n.data.key.children,s=f?null:[],o=0,l=i.length;o<l;o++){if(u.apply(r,[i[o],e],!1)){if(f)return i[o];s.push(i[o])}if(h=t.getNodesByFilter(n,i[o][c],r,f,e),f&&!!h)return h;s=f?h:s.concat(h)}return s},getPreNode:function(n,i){var u,f,r,e;if(!i)return null;for(u=n.data.key.children,f=i.parentTId?i.getParentNode():t.getRoot(n),r=0,e=f[u].length;r<e;r++)if(f[u][r]===i)return r==0?null:f[u][r-1];return null},getRoot:function(n){return n?l[n.treeId]:null},getSetting:function(n){return s[n]},getSettings:function(){return s},getZTreeTools:function(n){var t=this.getRoot(this.getSetting(n));return t?t.treeTools:null},initCache:function(){for(var n=0,t=f.caches.length;n<t;n++)f.caches[n].apply(this,arguments)},initNode:function(){for(var n=0,t=f.nodes.length;n<t;n++)f.nodes[n].apply(this,arguments)},initRoot:function(){for(var n=0,t=f.roots.length;n<t;n++)f.roots[n].apply(this,arguments)},isSelectedNode:function(n,i){for(var u=t.getRoot(n),r=0,f=u.curSelectedList.length;r<f;r++)if(i===u.curSelectedList[r])return!0;return!1},removeNodeCache:function(n,i){var u=n.data.key.children,r,f;if(i[u])for(r=0,f=i[u].length;r<f;r++)arguments.callee(n,i[u][r]);t.getCache(n).nodes[t.getNodeCacheId(i.tId)]=null},removeSelectedNode:function(n,i){for(var u=t.getRoot(n),r=0,f=u.curSelectedList.length;r<f;r++)i!==u.curSelectedList[r]&&t.getNodeCache(n,u.curSelectedList[r].tId)||(u.curSelectedList.splice(r,1),r--,f--)},setCache:function(n,t){h[n.treeId]=t},setRoot:function(n,t){l[n.treeId]=t},setZTreeTools:function(){for(var n=0,t=f.zTreeTools.length;n<t;n++)f.zTreeTools[n].apply(this,arguments)},transformToArrayFormat:function(n,i){var e,r,f,o;if(!i)return[];if(e=n.data.key.children,r=[],u.isArray(i))for(f=0,o=i.length;f<o;f++)r.push(i[f]),i[f][e]&&(r=r.concat(t.transformToArrayFormat(n,i[f][e])));else r.push(i),i[e]&&(r=r.concat(t.transformToArrayFormat(n,i[e])));return r},transformTozTreeFormat:function(n,t){var i,e,o=n.data.simpleData.idKey,f=n.data.simpleData.pIdKey,s=n.data.key.children,h,r;if(!o||o==""||!t)return[];if(u.isArray(t)){for(h=[],r=[],i=0,e=t.length;i<e;i++)r[t[i][o]]=t[i];for(i=0,e=t.length;i<e;i++)r[t[i][f]]&&t[i][o]!=t[i][f]?(r[t[i][f]][s]||(r[t[i][f]][s]=[]),r[t[i][f]][s].push(t[i])):h.push(t[i]);return h}return[t]}},e={bindEvent:function(){for(var n=0,t=f.bind.length;n<t;n++)f.bind[n].apply(this,arguments)},unbindEvent:function(){for(var n=0,t=f.unbind.length;n<t;n++)f.unbind[n].apply(this,arguments)},bindTree:function(n){var i={treeId:n.treeId},t=n.treeObj;t.bind("selectstart",function(n){var t=n.srcElement.nodeName.toLowerCase();return t==="input"||t==="textarea"}).css({"-moz-user-select":"-moz-none"});t.bind("click",i,e.proxy);t.bind("dblclick",i,e.proxy);t.bind("mouseover",i,e.proxy);t.bind("mouseout",i,e.proxy);t.bind("mousedown",i,e.proxy);t.bind("mouseup",i,e.proxy);t.bind("contextmenu",i,e.proxy)},unbindTree:function(n){var t=n.treeObj;t.unbind("click",e.proxy).unbind("dblclick",e.proxy).unbind("mouseover",e.proxy).unbind("mouseout",e.proxy).unbind("mousedown",e.proxy).unbind("mouseup",e.proxy).unbind("contextmenu",e.proxy)},doProxy:function(){for(var t,i=[],n=0,r=f.proxys.length;n<r;n++)if(t=f.proxys[n].apply(this,arguments),i.push(t),t.stop)break;return i},proxy:function(n){var c=t.getSetting(n.data.treeId),f,h,i;if(!u.uCanDo(c,n))return!0;var o=e.doProxy(n),r=!0,s=!1;for(f=0,h=o.length;f<h;f++)i=o[f],i.nodeEventCallback&&(s=!0,r=i.nodeEventCallback.apply(i,[n,i.node])&&r),i.treeEventCallback&&(s=!0,r=i.treeEventCallback.apply(i,[n,i.node])&&r);return r}},o={onSwitchNode:function(n,i){var f=t.getSetting(n.data.treeId);if(i.open){if(u.apply(f.callback.beforeCollapse,[f.treeId,i],!0)==!1)return!0;t.getRoot(f).expandTriggerFlag=!0;r.switchNode(f,i)}else{if(u.apply(f.callback.beforeExpand,[f.treeId,i],!0)==!1)return!0;t.getRoot(f).expandTriggerFlag=!0;r.switchNode(f,i)}return!0},onClickNode:function(n,f){var e=t.getSetting(n.data.treeId),o=e.view.autoCancelSelected&&n.ctrlKey&&t.isSelectedNode(e,f)?0:e.view.autoCancelSelected&&n.ctrlKey&&e.view.selectedMulti?2:1;return u.apply(e.callback.beforeClick,[e.treeId,f,o],!0)==!1?!0:(o===0?r.cancelPreSelectedNode(e,f):r.selectNode(e,f,o===2),e.treeObj.trigger(i.event.CLICK,[n,e.treeId,f,o]),!0)},onZTreeMousedown:function(n,i){var r=t.getSetting(n.data.treeId);return u.apply(r.callback.beforeMouseDown,[r.treeId,i],!0)&&u.apply(r.callback.onMouseDown,[n,r.treeId,i]),!0},onZTreeMouseup:function(n,i){var r=t.getSetting(n.data.treeId);return u.apply(r.callback.beforeMouseUp,[r.treeId,i],!0)&&u.apply(r.callback.onMouseUp,[n,r.treeId,i]),!0},onZTreeDblclick:function(n,i){var r=t.getSetting(n.data.treeId);return u.apply(r.callback.beforeDblClick,[r.treeId,i],!0)&&u.apply(r.callback.onDblClick,[n,r.treeId,i]),!0},onZTreeContextmenu:function(n,i){var r=t.getSetting(n.data.treeId);return u.apply(r.callback.beforeRightClick,[r.treeId,i],!0)&&u.apply(r.callback.onRightClick,[n,r.treeId,i]),typeof r.callback.onRightClick!="function"}},u={apply:function(n,t,i){return typeof n=="function"?n.apply(c,t?t:[]):i},canAsync:function(n,t){var i=n.data.key.children;return n.async.enable&&t&&t.isParent&&!(t.zAsync||t[i]&&t[i].length>0)},clone:function(n){var i,t;if(n===null)return null;i=n.constructor===Array?[]:{};for(t in n)i[t]=n[t]instanceof Date?new Date(n[t].getTime()):typeof n[t]=="object"?arguments.callee(n[t]):n[t];return i},eqs:function(n,t){return n.toLowerCase()===t.toLowerCase()},isArray:function(n){return Object.prototype.toString.apply(n)==="[object Array]"},getMDom:function(n,t,i){if(!t)return null;while(t&&t.id!==n.treeId){for(var r=0,f=i.length;t.tagName&&r<f;r++)if(u.eqs(t.tagName,i[r].tagName)&&t.getAttribute(i[r].attrName)!==null)return t;t=t.parentNode}return null},uCanDo:function(){return!0}},r={addNodes:function(f,e,o,s){if(!f.data.keep.leaf||!e||e.isParent)if(u.isArray(o)||(o=[o]),f.data.simpleData.enable&&(o=t.transformTozTreeFormat(f,o)),e){var h=n("#"+e.tId+i.id.SWITCH),c=n("#"+e.tId+i.id.ICON),l=n("#"+e.tId+i.id.UL);e.open||(r.replaceSwitchClass(e,h,i.folder.CLOSE),r.replaceIcoClass(e,c,i.folder.CLOSE),e.open=!1,l.css({display:"none"}));t.addNodesData(f,e,o);r.createNodes(f,e.level+1,o,e);s||r.expandCollapseParentNode(f,e,!0)}else t.addNodesData(f,t.getRoot(f),o),r.createNodes(f,0,o,null)},appendNodes:function(n,i,u,f,e,o){var h,l,c,v,s,a;if(!u)return[];for(h=[],l=n.data.key.children,c=0,v=u.length;c<v;c++){if(s=u[c],e){var y=f?f:t.getRoot(n),p=y[l],w=p.length==u.length&&c==0,b=c==u.length-1;t.initNode(n,i,s,f,w,b,o);t.addNodeCache(n,s)}a=[];s[l]&&s[l].length>0&&(a=r.appendNodes(n,i+1,s[l],s,e,o&&s.open));o&&(r.makeDOMNodeMainBefore(h,n,s),r.makeDOMNodeLine(h,n,s),t.getBeforeA(n,s,h),r.makeDOMNodeNameBefore(h,n,s),t.getInnerBeforeA(n,s,h),r.makeDOMNodeIcon(h,n,s),t.getInnerAfterA(n,s,h),r.makeDOMNodeNameAfter(h,n,s),t.getAfterA(n,s,h),s.isParent&&s.open&&r.makeUlHtml(n,s,h,a.join("")),r.makeDOMNodeMainAfter(h,n,s),t.addCreatedNode(n,s))}return h},appendParentULDom:function(t,u){var e=[],f=n("#"+u.tId),o=n("#"+u.tId+i.id.UL),s=t.data.key.children,h=r.appendNodes(t,u.level+1,u[s],u,!1,!0);r.makeUlHtml(t,u,e,h.join(""));f.get(0)||!u.parentTId||(r.appendParentULDom(t,u.getParentNode()),f=n("#"+u.tId));o.get(0)&&o.remove();f.append(e.join(""))},asyncNode:function(f,e,o,s){var h,a,w,l,c,v,y,p;if(e&&!e.isParent)return u.apply(s),!1;if(e&&e.isAjaxing)return!1;if(u.apply(f.callback.beforeAsync,[f.treeId,e],!0)==!1)return u.apply(s),!1;for(e&&(e.isAjaxing=!0,w=n("#"+e.tId+i.id.ICON),w.attr({style:"","class":"button ico_loading"})),l={},h=0,a=f.async.autoParam.length;e&&h<a;h++)c=f.async.autoParam[h].split("="),v=c,c.length>1&&(v=c[1],c=c[0]),l[v]=e[c];if(u.isArray(f.async.otherParam))for(h=0,a=f.async.otherParam.length;h<a;h+=2)l[f.async.otherParam[h]]=f.async.otherParam[h+1];else for(y in f.async.otherParam)l[y]=f.async.otherParam[y];return p=t.getRoot(f)._ver,n.ajax({contentType:f.async.contentType,type:f.async.type,url:u.apply(f.async.url,[f.treeId,e],f.async.url),data:l,dataType:f.async.dataType,success:function(msg){if(p==t.getRoot(f)._ver){var newNodes=[];try{newNodes=msg&&msg.length!=0?typeof msg=="string"?eval("("+msg+")"):msg:[]}catch(err){newNodes=msg}e&&(e.isAjaxing=null,e.zAsync=!0);r.setNodeLineIcos(f,e);newNodes&&newNodes!==""?(newNodes=u.apply(f.async.dataFilter,[f.treeId,e,newNodes],newNodes),r.addNodes(f,e,!newNodes?[]:u.clone(newNodes),!!o)):r.addNodes(f,e,[],!!o);f.treeObj.trigger(i.event.ASYNC_SUCCESS,[f.treeId,e,msg]);u.apply(s)}},error:function(n,u,o){p==t.getRoot(f)._ver&&(e&&(e.isAjaxing=null),r.setNodeLineIcos(f,e),f.treeObj.trigger(i.event.ASYNC_ERROR,[f.treeId,e,n,u,o]))}}),!0},cancelPreSelectedNode:function(r,u){for(var e=t.getRoot(r).curSelectedList,f=e.length-1;f>=0;f--)if((!u||u===e[f])&&(n("#"+e[f].tId+i.id.A).removeClass(i.node.CURSELECTED),u)){t.removeSelectedNode(r,u);break}u||(t.getRoot(r).curSelectedList=[])},createNodeCallback:function(n){var r,f;if(!!n.callback.onNodeCreated||!!n.view.addDiyDom)for(r=t.getRoot(n);r.createdNodes.length>0;)f=r.createdNodes.shift(),u.apply(n.view.addDiyDom,[n.treeId,f]),!n.callback.onNodeCreated||n.treeObj.trigger(i.event.NODECREATED,[n.treeId,f])},createNodes:function(u,f,e,o){var s,h;if(e&&e.length!=0){var c=t.getRoot(u),l=u.data.key.children,a=!o||o.open||!!n("#"+o[l][0].tId).get(0);c.createdNodes=[];s=r.appendNodes(u,f,e,o,!0,a);o?(h=n("#"+o.tId+i.id.UL),h.get(0)&&h.append(s.join(""))):u.treeObj.append(s.join(""));r.createNodeCallback(u)}},destroy:function(n){n&&(t.initCache(n),t.initRoot(n),e.unbindTree(n),e.unbindEvent(n),n.treeObj.empty())},expandCollapseNode:function(f,e,o,s,h){var y=t.getRoot(f),c=f.data.key.children,a;if(!e){u.apply(h,[]);return}if(y.expandTriggerFlag&&(a=h,h=function(){a&&a();e.open?f.treeObj.trigger(i.event.EXPAND,[f.treeId,e]):f.treeObj.trigger(i.event.COLLAPSE,[f.treeId,e])},y.expandTriggerFlag=!1),!e.open&&e.isParent&&(!n("#"+e.tId+i.id.UL).get(0)||e[c]&&e[c].length>0&&!n("#"+e[c][0].tId).get(0))&&(r.appendParentULDom(f,e),r.createNodeCallback(f)),e.open==o){u.apply(h,[]);return}var l=n("#"+e.tId+i.id.UL),p=n("#"+e.tId+i.id.SWITCH),v=n("#"+e.tId+i.id.ICON);e.isParent?(e.open=!e.open,e.iconOpen&&e.iconClose&&v.attr("style",r.makeNodeIcoStyle(f,e)),e.open?(r.replaceSwitchClass(e,p,i.folder.OPEN),r.replaceIcoClass(e,v,i.folder.OPEN),s==!1||f.view.expandSpeed==""?(l.show(),u.apply(h,[])):e[c]&&e[c].length>0?l.slideDown(f.view.expandSpeed,h):(l.show(),u.apply(h,[]))):(r.replaceSwitchClass(e,p,i.folder.CLOSE),r.replaceIcoClass(e,v,i.folder.CLOSE),s!=!1&&f.view.expandSpeed!=""&&e[c]&&e[c].length>0?l.slideUp(f.view.expandSpeed,h):(l.hide(),u.apply(h,[])))):u.apply(h,[])},expandCollapseParentNode:function(n,t,i,u,f){if(t){if(t.parentTId)r.expandCollapseNode(n,t,i,u);else{r.expandCollapseNode(n,t,i,u,f);return}t.parentTId&&r.expandCollapseParentNode(n,t.getParentNode(),i,u,f)}},expandCollapseSonNode:function(n,i,u,f,e){var l=t.getRoot(n),h=n.data.key.children,s=i?i[h]:l[h],a=i?!1:f,v=t.getRoot(n).expandTriggerFlag,o,c;if(t.getRoot(n).expandTriggerFlag=!1,s)for(o=0,c=s.length;o<c;o++)s[o]&&r.expandCollapseSonNode(n,s[o],u,a);t.getRoot(n).expandTriggerFlag=v;r.expandCollapseNode(n,i,u,f,e)},makeDOMNodeIcon:function(n,u,f){var e=t.getNodeName(u,f),o=u.view.nameIsHTML?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");n.push("<span id='",f.tId,i.id.ICON,"' title='' treeNode",i.id.ICON," class='",r.makeNodeIcoClass(u,f),"' style='",r.makeNodeIcoStyle(u,f),"'><\/span><span id='",f.tId,i.id.SPAN,"'>",o,"<\/span>")},makeDOMNodeLine:function(n,t,u){n.push("<span id='",u.tId,i.id.SWITCH,"' title='' class='",r.makeNodeLineClass(t,u),"' treeNode",i.id.SWITCH,"><\/span>")},makeDOMNodeMainAfter:function(n){n.push("<\/li>")},makeDOMNodeMainBefore:function(n,t,i){n.push("<li id='",i.tId,"' class='level",i.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(n){n.push("<\/a>")},makeDOMNodeNameBefore:function(n,f,e){var s=t.getNodeTitle(f,e),o=r.makeNodeUrl(f,e),h=r.makeNodeFontCss(f,e),c=[];for(var l in h)c.push(l,":",h[l],";");n.push("<a id='",e.tId,i.id.A,"' class='level",e.level,"' treeNode",i.id.A,' onclick="',e.click||"",'" ',o!=null&&o.length>0?"href='"+o+"'":""," target='",r.makeNodeTarget(e),"' style='",c.join(""),"'");u.apply(f.view.showTitle,[f.treeId,e],f.view.showTitle)&&s&&n.push("title='",s.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'");n.push(">")},makeNodeFontCss:function(n,t){var i=u.apply(n.view.fontCss,[n.treeId,t],n.view.fontCss);return i&&typeof i!="function"?i:{}},makeNodeIcoClass:function(n,t){var r=["ico"];return t.isAjaxing||(r[0]=(t.iconSkin?t.iconSkin+"_":"")+r[0],t.isParent?r.push(t.open?i.folder.OPEN:i.folder.CLOSE):r.push(i.folder.DOCU)),"button "+r.join("_")},makeNodeIcoStyle:function(n,t){var i=[],r;return t.isAjaxing||(r=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t.icon,r&&i.push("background:url(",r,") 0 0 no-repeat;"),n.view.showIcon!=!1&&u.apply(n.view.showIcon,[n.treeId,t],!0)||i.push("width:0px;height:0px;")),i.join("")},makeNodeLineClass:function(n,t){var u=[];return n.view.showLine?t.level==0&&t.isFirstNode&&t.isLastNode?u.push(i.line.ROOT):t.level==0&&t.isFirstNode?u.push(i.line.ROOTS):t.isLastNode?u.push(i.line.BOTTOM):u.push(i.line.CENTER):u.push(i.line.NOLINE),t.isParent?u.push(t.open?i.folder.OPEN:i.folder.CLOSE):u.push(i.folder.DOCU),r.makeNodeLineClassEx(t)+u.join("_")},makeNodeLineClassEx:function(n){return"button level"+n.level+" switch "},makeNodeTarget:function(n){return n.target||"_blank"},makeNodeUrl:function(n,t){var i=n.data.key.url;return t[i]?t[i]:null},makeUlHtml:function(n,t,u,f){u.push("<ul id='",t.tId,i.id.UL,"' class='level",t.level," ",r.makeUlLineClass(n,t),"' style='display:",t.open?"block":"none","'>");u.push(f);u.push("<\/ul>")},makeUlLineClass:function(n,t){return n.view.showLine&&!t.isLastNode?i.line.LINE:""},removeChildNodes:function(u,f){var s,e,o,h,c,l;if(f&&(s=u.data.key.children,e=f[s],e)){for(o=0,h=e.length;o<h;o++)t.removeNodeCache(u,e[o]);t.removeSelectedNode(u);delete f[s];u.data.keep.parent?n("#"+f.tId+i.id.UL).empty():(f.isParent=!1,f.open=!1,c=n("#"+f.tId+i.id.SWITCH),l=n("#"+f.tId+i.id.ICON),r.replaceSwitchClass(f,c,i.folder.DOCU),r.replaceIcoClass(f,l,i.folder.DOCU),n("#"+f.tId+i.id.UL).remove())}},setFirstNode:function(n,t){var i=n.data.key.children,r=t[i].length;r>0&&(t[i][0].isFirstNode=!0)},setLastNode:function(n,t){var i=n.data.key.children,r=t[i].length;r>0&&(t[i][r-1].isLastNode=!0)},removeNode:function(u,f){var y=t.getRoot(u),o=u.data.key.children,e=f.parentTId?f.getParentNode():y,c,p,l,h,v,a,s,w;if(f.isFirstNode=!1,f.isLastNode=!1,f.getPreNode=function(){return null},f.getNextNode=function(){return null},t.getNodeCache(u,f.tId)){for(n("#"+f.tId).remove(),t.removeNodeCache(u,f),t.removeSelectedNode(u,f),c=0,p=e[o].length;c<p;c++)if(e[o][c].tId==f.tId){e[o].splice(c,1);break}r.setFirstNode(u,e);r.setLastNode(u,e);a=e[o].length;u.data.keep.parent||a!=0?u.view.showLine&&a>0&&(s=e[o][a-1],l=n("#"+s.tId+i.id.UL),h=n("#"+s.tId+i.id.SWITCH),v=n("#"+s.tId+i.id.ICON),e==y?e[o].length==1?r.replaceSwitchClass(s,h,i.line.ROOT):(w=n("#"+e[o][0].tId+i.id.SWITCH),r.replaceSwitchClass(e[o][0],w,i.line.ROOTS),r.replaceSwitchClass(s,h,i.line.BOTTOM)):r.replaceSwitchClass(s,h,i.line.BOTTOM),l.removeClass(i.line.LINE)):(e.isParent=!1,e.open=!1,l=n("#"+e.tId+i.id.UL),h=n("#"+e.tId+i.id.SWITCH),v=n("#"+e.tId+i.id.ICON),r.replaceSwitchClass(e,h,i.folder.DOCU),r.replaceIcoClass(e,v,i.folder.DOCU),l.css("display","none"))}},replaceIcoClass:function(n,t,r){var f,u;if(t&&!n.isAjaxing&&(f=t.attr("class"),f!=undefined)){u=f.split("_");switch(r){case i.folder.OPEN:case i.folder.CLOSE:case i.folder.DOCU:u[u.length-1]=r}t.attr("class",u.join("_"))}},replaceSwitchClass:function(n,t,u){var e,f;if(t&&(e=t.attr("class"),e!=undefined)){f=e.split("_");switch(u){case i.line.ROOT:case i.line.ROOTS:case i.line.CENTER:case i.line.BOTTOM:case i.line.NOLINE:f[0]=r.makeNodeLineClassEx(n)+u;break;case i.folder.OPEN:case i.folder.CLOSE:case i.folder.DOCU:f[1]=u}t.attr("class",f.join("_"));u!==i.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}},selectNode:function(u,f,e){e||r.cancelPreSelectedNode(u);n("#"+f.tId+i.id.A).addClass(i.node.CURSELECTED);t.addSelectedNode(u,f)},setNodeFontCss:function(t,u){var e=n("#"+u.tId+i.id.A),f=r.makeNodeFontCss(t,u);f&&e.css(f)},setNodeLineIcos:function(t,u){if(u){var f=n("#"+u.tId+i.id.SWITCH),o=n("#"+u.tId+i.id.UL),e=n("#"+u.tId+i.id.ICON),s=r.makeUlLineClass(t,u);s.length==0?o.removeClass(i.line.LINE):o.addClass(s);f.attr("class",r.makeNodeLineClass(t,u));u.isParent?f.removeAttr("disabled"):f.attr("disabled","disabled");e.removeAttr("style");e.attr("style",r.makeNodeIcoStyle(t,u));e.attr("class",r.makeNodeIcoClass(t,u))}},setNodeName:function(r,f){var o=t.getNodeTitle(r,f),e=n("#"+f.tId+i.id.SPAN),s;e.empty();r.view.nameIsHTML?e.html(t.getNodeName(r,f)):e.text(t.getNodeName(r,f));u.apply(r.view.showTitle,[r.treeId,f],r.view.showTitle)&&(s=n("#"+f.tId+i.id.A),s.attr("title",o?o:""))},setNodeTarget:function(t){var u=n("#"+t.tId+i.id.A);u.attr("target",r.makeNodeTarget(t))},setNodeUrl:function(t,u){var e=n("#"+u.tId+i.id.A),f=r.makeNodeUrl(t,u);f==null||f.length==0?e.removeAttr("href"):e.attr("href",f)},switchNode:function(n,t){if(t.open||!u.canAsync(n,t))r.expandCollapseNode(n,t,!t.open);else if(n.async.enable){if(!r.asyncNode(n,t)){r.expandCollapseNode(n,t,!t.open);return}}else t&&r.expandCollapseNode(n,t,!t.open)}},c,i;n.fn.zTree={consts:{event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:u,view:r,event:e,data:t},getZTreeObj:function(n){var i=t.getZTreeTools(n);return i?i:null},destroy:function(n){if(!!n&&n.length>0)r.destroy(t.getSetting(n));else for(var i in s)r.destroy(s[i])},init:function(f,o,h){var c=u.clone(a),l,v,y;return n.extend(!0,c,o),c.treeId=f.attr("id"),c.treeObj=f,c.treeObj.empty(),n(f).addClass("ztree"),s[c.treeId]=c,typeof document.body.style.maxHeight=="undefined"&&(c.view.expandSpeed=""),t.initRoot(c),l=t.getRoot(c),v=c.data.key.children,h=h?u.clone(u.isArray(h)?h:[h]):[],l[v]=c.data.simpleData.enable?t.transformTozTreeFormat(c,h):h,t.initCache(c),e.unbindTree(c),e.bindTree(c),e.unbindEvent(c),e.bindEvent(c),y={setting:c,addNodes:function(n,t,i){function e(){r.addNodes(c,n,f,i==!0)}if(!t||(n||(n=null),n&&!n.isParent&&c.data.keep.leaf))return null;var f=u.clone(u.isArray(t)?t:[t]);return u.canAsync(c,n)?r.asyncNode(c,n,i,e):e(),f},cancelSelectedNode:function(n){r.cancelPreSelectedNode(this.setting,n)},destroy:function(){r.destroy(this.setting)},expandAll:function(n){return n=!!n,r.expandCollapseSonNode(this.setting,null,n,!0),n},expandNode:function(i,f,e,o,s){if(!i||!i.isParent||(f!==!0&&f!==!1&&(f=!i.open),s=!!s,s&&f&&u.apply(c.callback.beforeExpand,[c.treeId,i],!0)==!1)||s&&!f&&u.apply(c.callback.beforeCollapse,[c.treeId,i],!0)==!1||(f&&i.parentTId&&r.expandCollapseParentNode(this.setting,i.getParentNode(),f,!1),f===i.open&&!e))return null;if(t.getRoot(c).expandTriggerFlag=s,e)r.expandCollapseSonNode(this.setting,i,f,!0,function(){if(o!==!1)try{n("#"+i.tId).focus().blur()}catch(t){}});else if(i.open=!f,r.switchNode(this.setting,i),o!==!1)try{n("#"+i.tId).focus().blur()}catch(h){}return f},getNodes:function(){return t.getNodes(this.setting)},getNodeByParam:function(n,i,r){return n?t.getNodeByParam(this.setting,r?r[this.setting.data.key.children]:t.getNodes(this.setting),n,i):null},getNodeByTId:function(n){return t.getNodeCache(this.setting,n)},getNodesByParam:function(n,i,r){return n?t.getNodesByParam(this.setting,r?r[this.setting.data.key.children]:t.getNodes(this.setting),n,i):null},getNodesByParamFuzzy:function(n,i,r){return n?t.getNodesByParamFuzzy(this.setting,r?r[this.setting.data.key.children]:t.getNodes(this.setting),n,i):null},getNodesByFilter:function(n,i,r,u){return(i=!!i,!n||typeof n!="function")?i?null:[]:t.getNodesByFilter(this.setting,r?r[this.setting.data.key.children]:t.getNodes(this.setting),n,i,u)},getNodeIndex:function(n){var r,u,i,f;if(!n)return null;for(r=c.data.key.children,u=n.parentTId?n.getParentNode():t.getRoot(this.setting),i=0,f=u[r].length;i<f;i++)if(u[r][i]==n)return i;return-1},getSelectedNodes:function(){for(var i=[],r=t.getRoot(this.setting).curSelectedList,n=0,u=r.length;n<u;n++)i.push(r[n]);return i},isSelectedNode:function(n){return t.isSelectedNode(this.setting,n)},reAsyncChildNodes:function(u,f,e){var s,o,h,l,a;if(this.setting.async.enable){if(s=!u,s&&(u=t.getRoot(this.setting)),f=="refresh"){for(o=this.setting.data.key.children,h=0,l=u[o]?u[o].length:0;h<l;h++)t.removeNodeCache(c,u[o][h]);t.removeSelectedNode(c);u[o]=[];s?this.setting.treeObj.empty():(a=n("#"+u.tId+i.id.UL),a.empty())}r.asyncNode(this.setting,s?null:u,!!e)}},refresh:function(){this.setting.treeObj.empty();var n=t.getRoot(this.setting),i=n[this.setting.data.key.children];t.initRoot(this.setting);n[this.setting.data.key.children]=i;t.initCache(this.setting);r.createNodes(this.setting,0,n[this.setting.data.key.children])},removeChildNodes:function(n){if(!n)return null;var i=c.data.key.children,t=n[i];return r.removeChildNodes(c,n),t?t:null},removeNode:function(n,t){n&&((t=!!t,t&&u.apply(c.callback.beforeRemove,[c.treeId,n],!0)==!1)||(r.removeNode(c,n),t&&this.setting.treeObj.trigger(i.event.REMOVE,[c.treeId,n])))},selectNode:function(t,i){if(t&&u.uCanDo(this.setting)){if(i=c.view.selectedMulti&&i,t.parentTId)r.expandCollapseParentNode(this.setting,t.getParentNode(),!0,!1,function(){try{n("#"+t.tId).focus().blur()}catch(i){}});else try{n("#"+t.tId).focus().blur()}catch(f){}r.selectNode(this.setting,t,i)}},transformTozTreeNodes:function(n){return t.transformTozTreeFormat(this.setting,n)},transformToArray:function(n){return t.transformToArrayFormat(this.setting,n)},updateNode:function(t){if(t){var i=n("#"+t.tId);i.get(0)&&u.uCanDo(this.setting)&&(r.setNodeName(this.setting,t),r.setNodeTarget(t),r.setNodeUrl(this.setting,t),r.setNodeLineIcos(this.setting,t),r.setNodeFontCss(this.setting,t))}}},l.treeTools=y,t.setZTreeTools(c,y),l[v]&&l[v].length>0?r.createNodes(c,0,l[v]):c.async.enable&&c.async.url&&c.async.url!==""&&r.asyncNode(c),y}};c=n.fn.zTree;i=c.consts}(t),function(n){var e={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},l={check:{enable:!1,autoCheckTrigger:!1,chkStyle:e.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:e.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},a=function(n){var t=r.getRoot(n);t.radioCheckedList=[]},v=function(){},y=function(n){var t=n.treeObj,r=i.event;t.bind(r.CHECK,function(t,i,r,f){u.apply(n.callback.onCheck,[!i?t:i,r,f])})},p=function(n){var t=n.treeObj,r=i.event;t.unbind(r.CHECK)},w=function(n){var t=n.target,s=r.getSetting(n.data.treeId),f="",c=null,e="",h=null;if(u.eqs(n.type,"mouseover")?s.check.enable&&u.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+i.id.CHECK)!==null&&(f=t.parentNode.id,e="mouseoverCheck"):u.eqs(n.type,"mouseout")?s.check.enable&&u.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+i.id.CHECK)!==null&&(f=t.parentNode.id,e="mouseoutCheck"):u.eqs(n.type,"click")&&s.check.enable&&u.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+i.id.CHECK)!==null&&(f=t.parentNode.id,e="checkNode"),f.length>0){c=r.getNodeCache(s,f);switch(e){case"checkNode":h=o.onCheckNode;break;case"mouseoverCheck":h=o.onMouseoverCheck;break;case"mouseoutCheck":h=o.onMouseoutCheck}}return{stop:!1,node:c,nodeEventType:e,nodeEventCallback:h,treeEventType:"",treeEventCallback:null}},b=function(n,t,i,f){if(i){var e=n.data.key.checked;typeof i[e]=="string"&&(i[e]=u.eqs(i[e],"true"));i[e]=!!i[e];i.checkedOld=i[e];typeof i.nocheck=="string"&&(i.nocheck=u.eqs(i.nocheck,"true"));i.nocheck=!!i.nocheck||n.check.nocheckInherit&&f&&!!f.nocheck;typeof i.chkDisabled=="string"&&(i.chkDisabled=u.eqs(i.chkDisabled,"true"));i.chkDisabled=!!i.chkDisabled||n.check.chkDisabledInherit&&f&&!!f.chkDisabled;typeof i.halfCheck=="string"&&(i.halfCheck=u.eqs(i.halfCheck,"true"));i.halfCheck=!!i.halfCheck;i.check_Child_State=-1;i.check_Focus=!1;i.getCheckStatus=function(){return r.getCheckStatus(n,i)}}},k=function(n,u,f){var o=n.data.key.checked,e;n.check.enable&&(r.makeChkFlag(n,u),n.check.chkStyle==i.radio.STYLE&&n.check.radioType==i.radio.TYPE_ALL&&u[o]&&(e=r.getRoot(n),e.radioCheckedList.push(u)),f.push("<span ID='",u.tId,i.id.CHECK,"' class='",t.makeChkClass(n,u),"' treeNode",i.id.CHECK,u.nocheck===!0?" style='display:none;'":"","><\/span>"))},d=function(f,e){e.checkNode=function(r,e,o,s){var h=this.setting.data.key.checked,c;if(r.chkDisabled!==!0){if(e!==!0&&e!==!1&&(e=!r[h]),s=!!s,r[h]!==e||o){if(s&&u.apply(this.setting.callback.beforeCheck,[this.setting.treeId,r],!0)==!1)return}else return;u.uCanDo(this.setting)&&this.setting.check.enable&&r.nocheck!==!0&&(r[h]=e,c=n("#"+r.tId+i.id.CHECK),(o||this.setting.check.chkStyle===i.radio.STYLE)&&t.checkNodeRelation(this.setting,r),t.setChkClass(this.setting,c,r),t.repairParentChkClassWithSelf(this.setting,r),s&&f.treeObj.trigger(i.event.CHECK,[null,f.treeId,r]))}};e.checkAllNodes=function(n){t.repairAllChk(this.setting,!!n)};e.getCheckedNodes=function(n){var t=this.setting.data.key.children;return n=n!==!1,r.getTreeCheckedNodes(this.setting,r.getRoot(f)[t],n)};e.getChangeCheckedNodes=function(){var n=this.setting.data.key.children;return r.getTreeChangeCheckedNodes(this.setting,r.getRoot(f)[n])};e.setChkDisabled=function(n,i,r,u){i=!!i;r=!!r;u=!!u;t.repairSonChkDisabled(this.setting,n,i,u);t.repairParentChkDisabled(this.setting,n.getParentNode(),i,r)};var o=e.updateNode;e.updateNode=function(r,f){var s,h;(o&&o.apply(e,arguments),r&&this.setting.check.enable)&&(s=n("#"+r.tId),s.get(0)&&u.uCanDo(this.setting)&&(h=n("#"+r.tId+i.id.CHECK),(f==!0||this.setting.check.chkStyle===i.radio.STYLE)&&t.checkNodeRelation(this.setting,r),t.setChkClass(this.setting,h,r),t.repairParentChkClassWithSelf(this.setting,r)))}},g={getRadioCheckedList:function(n){for(var i=r.getRoot(n).radioCheckedList,t=0,u=i.length;t<u;t++)r.getNodeCache(n,i[t].tId)||(i.splice(t,1),t--,u--);return i},getCheckStatus:function(n,t){if(!n.check.enable||t.nocheck||t.chkDisabled)return null;var r=n.data.key.checked;return{checked:t[r],half:t.halfCheck?t.halfCheck:n.check.chkStyle==i.radio.STYLE?t.check_Child_State===2:t[r]?t.check_Child_State>-1&&t.check_Child_State<2:t.check_Child_State>0}},getTreeCheckedNodes:function(n,t,u,f){var e,s;if(!t)return[];var h=n.data.key.children,c=n.data.key.checked,o=u&&n.check.chkStyle==i.radio.STYLE&&n.check.radioType==i.radio.TYPE_ALL;for(f=f?f:[],e=0,s=t.length;e<s;e++){if(t[e].nocheck!==!0&&t[e].chkDisabled!==!0&&t[e][c]==u&&(f.push(t[e]),o))break;if(r.getTreeCheckedNodes(n,t[e][h],u,f),o&&f.length>0)break}return f},getTreeChangeCheckedNodes:function(n,t,i){var f,e,u,o;if(!t)return[];for(f=n.data.key.children,e=n.data.key.checked,i=i?i:[],u=0,o=t.length;u<o;u++)t[u].nocheck!==!0&&t[u].chkDisabled!==!0&&t[u][e]!=t[u].checkedOld&&i.push(t[u]),r.getTreeChangeCheckedNodes(n,t[u][f],i);return i},makeChkFlag:function(n,t){var e,h,r,u;if(t){var o=n.data.key.children,s=n.data.key.checked,f=-1;if(t[o])for(e=0,h=t[o].length;e<h;e++)if(r=t[o][e],u=-1,n.check.chkStyle==i.radio.STYLE)if(u=r.nocheck===!0||r.chkDisabled===!0?r.check_Child_State:r.halfCheck===!0?2:r[s]?2:r.check_Child_State>0?2:0,u==2){f=2;break}else u==0&&(f=0);else if(n.check.chkStyle==i.checkbox.STYLE)if(u=r.nocheck===!0||r.chkDisabled===!0?r.check_Child_State:r.halfCheck===!0?1:r[s]?r.check_Child_State===-1||r.check_Child_State===2?2:1:r.check_Child_State>0?1:0,u===1){f=1;break}else if(u===2&&f>-1&&e>0&&u!==f){f=1;break}else if(f===2&&u>-1&&u<2){f=1;break}else u>-1&&(f=u);t.check_Child_State=f}}},o={onCheckNode:function(f,e){var o,s,h;return e.chkDisabled===!0?!1:(o=r.getSetting(f.data.treeId),s=o.data.key.checked,u.apply(o.callback.beforeCheck,[o.treeId,e],!0)==!1)?!0:(e[s]=!e[s],t.checkNodeRelation(o,e),h=n("#"+e.tId+i.id.CHECK),t.setChkClass(o,h,e),t.repairParentChkClassWithSelf(o,e),o.treeObj.trigger(i.event.CHECK,[f,o.treeId,e]),!0)},onMouseoverCheck:function(u,f){if(f.chkDisabled===!0)return!1;var e=r.getSetting(u.data.treeId),o=n("#"+f.tId+i.id.CHECK);return f.check_Focus=!0,t.setChkClass(e,o,f),!0},onMouseoutCheck:function(u,f){if(f.chkDisabled===!0)return!1;var e=r.getSetting(u.data.treeId),o=n("#"+f.tId+i.id.CHECK);return f.check_Focus=!1,t.setChkClass(e,o,f),!0}},nt={checkNodeRelation:function(u,f){var o,e,l,c=u.data.key.children,s=u.data.key.checked,a=i.radio,h,v;if(u.check.chkStyle==a.STYLE){if(h=r.getRadioCheckedList(u),f[s])if(u.check.radioType==a.TYPE_ALL){for(e=h.length-1;e>=0;e--)o=h[e],o[s]=!1,h.splice(e,1),t.setChkClass(u,n("#"+o.tId+i.id.CHECK),o),o.parentTId!=f.parentTId&&t.repairParentChkClassWithSelf(u,o);h.push(f)}else for(v=f.parentTId?f.getParentNode():r.getRoot(u),e=0,l=v[c].length;e<l;e++)o=v[c][e],o[s]&&o!=f&&(o[s]=!1,t.setChkClass(u,n("#"+o.tId+i.id.CHECK),o));else if(u.check.radioType==a.TYPE_ALL)for(e=0,l=h.length;e<l;e++)if(f==h[e]){h.splice(e,1);break}}else f[s]&&(!f[c]||f[c].length==0||u.check.chkboxType.Y.indexOf("s")>-1)&&t.setSonNodeCheckBox(u,f,!0),!f[s]&&(!f[c]||f[c].length==0||u.check.chkboxType.N.indexOf("s")>-1)&&t.setSonNodeCheckBox(u,f,!1),f[s]&&u.check.chkboxType.Y.indexOf("p")>-1&&t.setParentNodeCheckBox(u,f,!0),!f[s]&&u.check.chkboxType.N.indexOf("p")>-1&&t.setParentNodeCheckBox(u,f,!1)},makeChkClass:function(n,t){var f=n.data.key.checked,r=i.checkbox,o=i.radio,e="",u;return e=t.chkDisabled===!0?r.DISABLED:t.halfCheck?r.PART:n.check.chkStyle==o.STYLE?t.check_Child_State<1?r.FULL:r.PART:t[f]?t.check_Child_State===2||t.check_Child_State===-1?r.FULL:r.PART:t.check_Child_State<1?r.FULL:r.PART,u=n.check.chkStyle+"_"+(t[f]?r.TRUE:r.FALSE)+"_"+e,u=t.check_Focus&&t.chkDisabled!==!0?u+"_"+r.FOCUS:u,"button "+r.DEFAULT+" "+u},repairAllChk:function(n,u){var e,h,f;if(n.check.enable&&n.check.chkStyle===i.checkbox.STYLE){var c=n.data.key.checked,o=n.data.key.children,s=r.getRoot(n);for(e=0,h=s[o].length;e<h;e++)f=s[o][e],f.nocheck!==!0&&f.chkDisabled!==!0&&(f[c]=u),t.setSonNodeCheckBox(n,f,u)}},repairChkClass:function(u,f){if(f&&(r.makeChkFlag(u,f),f.nocheck!==!0)){var e=n("#"+f.tId+i.id.CHECK);t.setChkClass(u,e,f)}},repairParentChkClass:function(n,i){if(i&&i.parentTId){var r=i.getParentNode();t.repairChkClass(n,r);t.repairParentChkClass(n,r)}},repairParentChkClassWithSelf:function(n,i){if(i){var r=n.data.key.children;i[r]&&i[r].length>0?t.repairParentChkClass(n,i[r][0]):t.repairParentChkClass(n,i)}},repairSonChkDisabled:function(n,i,r,u){var f,e,o,s;if(i&&(f=n.data.key.children,i.chkDisabled!=r&&(i.chkDisabled=r),t.repairChkClass(n,i),i[f]&&u))for(e=0,o=i[f].length;e<o;e++)s=i[f][e],t.repairSonChkDisabled(n,s,r,u)},repairParentChkDisabled:function(n,i,r,u){i&&(i.chkDisabled!=r&&u&&(i.chkDisabled=r),t.repairChkClass(n,i),t.repairParentChkDisabled(n,i.getParentNode(),r,u))},setChkClass:function(n,i,r){i&&(r.nocheck===!0?i.hide():i.show(),i.removeClass(),i.addClass(t.makeChkClass(n,r)))},setParentNodeCheckBox:function(u,f,e,o){var v=u.data.key.children,l=u.data.key.checked,y=n("#"+f.tId+i.id.CHECK),c,h,s,a;if(o||(o=f),r.makeChkFlag(u,f),f.nocheck!==!0&&f.chkDisabled!==!0&&(f[l]=e,t.setChkClass(u,y,f),u.check.autoCheckTrigger&&f!=o&&u.treeObj.trigger(i.event.CHECK,[null,u.treeId,f])),f.parentTId){if(c=!0,!e)for(h=f.getParentNode()[v],s=0,a=h.length;s<a;s++)if(h[s].nocheck!==!0&&h[s].chkDisabled!==!0&&h[s][l]||(h[s].nocheck===!0||h[s].chkDisabled===!0)&&h[s].check_Child_State>0){c=!1;break}c&&t.setParentNodeCheckBox(u,f.getParentNode(),e,o)}},setSonNodeCheckBox:function(u,f,e,o){var h,c,a,l;if(f){var s=u.data.key.children,v=u.data.key.checked,y=n("#"+f.tId+i.id.CHECK);if(o||(o=f),h=!1,f[s])for(c=0,a=f[s].length;c<a&&f.chkDisabled!==!0;c++)l=f[s][c],t.setSonNodeCheckBox(u,l,e,o),l.chkDisabled===!0&&(h=!0);f!=r.getRoot(u)&&f.chkDisabled!==!0&&(h&&f.nocheck!==!0&&r.makeChkFlag(u,f),f.nocheck!==!0&&f.chkDisabled!==!0?(f[v]=e,h||(f.check_Child_State=f[s]&&f[s].length>0?e?2:0:-1)):f.check_Child_State=-1,t.setChkClass(u,y,f),u.check.autoCheckTrigger&&f!=o&&f.nocheck!==!0&&f.chkDisabled!==!0&&u.treeObj.trigger(i.event.CHECK,[null,u.treeId,f]))}}},tt={tools:{},view:nt,event:{},data:g},s,h,c;n.extend(!0,n.fn.zTree.consts,e);n.extend(!0,n.fn.zTree._z,tt);var f=n.fn.zTree,u=f._z.tools,i=f.consts,t=f._z.view,r=f._z.data,it=f._z.event;r.exSetting(l);r.addInitBind(y);r.addInitUnBind(p);r.addInitCache(v);r.addInitNode(b);r.addInitProxy(w);r.addInitRoot(a);r.addBeforeA(k);r.addZTreeTools(d);s=t.createNodes;t.createNodes=function(n,i,r,u){(s&&s.apply(t,arguments),r)&&t.repairParentChkClassWithSelf(n,u)};h=t.removeNode;t.removeNode=function(n,i){var r=i.getParentNode();(h&&h.apply(t,arguments),i&&r)&&(t.repairChkClass(n,r),t.repairParentChkClass(n,r))};c=t.appendNodes;t.appendNodes=function(n,i,u,f){var e="";return c&&(e=c.apply(t,arguments)),f&&r.makeChkFlag(n,f),e}}(t),function(n){var f={event:{DRAG:"ztree_drag",DROP:"ztree_drop",REMOVE:"ztree_remove",RENAME:"ztree_rename"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},y=function(n){var t=u.getRoot(n);t.curEditNode=null;t.curEditInput=null;t.curHoverNode=null;t.dragFlag=0;t.dragNodeShowBefore=[];t.dragMaskList=[];t.showHoverDom=!0},p=function(){},w=function(n){var i=n.treeObj,u=t.event;i.bind(u.RENAME,function(t,i,u){r.apply(n.callback.onRename,[t,i,u])});i.bind(u.REMOVE,function(t,i,u){r.apply(n.callback.onRemove,[t,i,u])});i.bind(u.DRAG,function(t,i,u,f){r.apply(n.callback.onDrag,[i,u,f])});i.bind(u.DROP,function(t,i,u,f,e,o,s){r.apply(n.callback.onDrop,[i,u,f,e,o,s])})},b=function(n){var i=n.treeObj,r=t.event;i.unbind(r.RENAME);i.unbind(r.REMOVE);i.unbind(r.DRAG);i.unbind(r.DROP)},k=function(n){var c=n.target,s=u.getSetting(n.data.treeId),a=n.relatedTarget,f="",l=null,e="",h=null,i=null;if(r.eqs(n.type,"mouseover")?(i=r.getMDom(s,c,[{tagName:"a",attrName:"treeNode"+t.id.A}]),i&&(f=i.parentNode.id,e="hoverOverNode")):r.eqs(n.type,"mouseout")?(i=r.getMDom(s,a,[{tagName:"a",attrName:"treeNode"+t.id.A}]),i||(f="remove",e="hoverOutNode")):r.eqs(n.type,"mousedown")&&(i=r.getMDom(s,c,[{tagName:"a",attrName:"treeNode"+t.id.A}]),i&&(f=i.parentNode.id,e="mousedownNode")),f.length>0){l=u.getNodeCache(s,f);switch(e){case"mousedownNode":h=o.onMousedownNode;break;case"hoverOverNode":h=o.onHoverOverNode;break;case"hoverOutNode":h=o.onHoverOutNode}}return{stop:!1,node:l,nodeEventType:e,nodeEventCallback:h,treeEventType:"",treeEventCallback:null}},d=function(n,t,i){i&&(i.isHover=!1,i.editNameFlag=!1)},g=function(f,e){e.cancelEditName=function(n){var t=u.getRoot(f),r=f.data.key.name,e=t.curEditNode;t.curEditNode&&i.cancelCurEditNode(f,n?n:e[r])};e.copyNode=function(n,u,e,o){if(!u||n&&!n.isParent&&f.data.keep.leaf&&e===t.move.TYPE_INNER)return null;var s=r.clone(u);if(n||(n=null,e=t.move.TYPE_INNER),e==t.move.TYPE_INNER){function h(){i.addNodes(f,n,[s],o)}r.canAsync(f,n)?i.asyncNode(f,n,o,h):h()}else i.addNodes(f,n.parentNode,[s],o),i.moveNode(f,n,s,e,!1,o);return s};e.editName=function(n){n&&n.tId&&n===u.getNodeCache(f,n.tId)&&(n.parentTId&&i.expandCollapseParentNode(f,n.getParentNode(),!0),i.editNode(f,n))};e.moveNode=function(u,e,o,s){function h(){i.moveNode(f,u,e,o,!1,s)}return e?u&&!u.isParent&&f.data.keep.leaf&&o===t.move.TYPE_INNER?null:u&&(e.parentTId==u.tId&&o==t.move.TYPE_INNER||n("#"+e.tId).find("#"+u.tId).length>0)?null:(u||(u=null),r.canAsync(f,u)?i.asyncNode(f,u,s,h):h(),e):e};e.setEditable=function(n){return f.edit.enable=n,this.refresh()}},nt={setSonNodeLevel:function(n,t,i){var r,f,e;if(i&&(r=n.data.key.children,i.level=t?t.level+1:0,i[r]))for(f=0,e=i[r].length;f<e;f++)i[r][f]&&u.setSonNodeLevel(n,i,i[r][f])}},o={onHoverOverNode:function(n,t){var r=u.getSetting(n.data.treeId),f=u.getRoot(r);if(f.curHoverNode!=t)o.onHoverOutNode(n);f.curHoverNode=t;i.addHoverDom(r,t)},onHoverOutNode:function(n){var r=u.getSetting(n.data.treeId),t=u.getRoot(r);t.curHoverNode&&!u.isSelectedNode(r,t.curHoverNode)&&(i.removeTreeDom(r,t.curHoverNode),t.curHoverNode=null)},onMousedownNode:function(e,o){function st(e){var o,et,k,ht,wt,pi,bt,kt,dt,ei,st,at,ft,ti,vt,yt,yi;if(p.dragFlag==0&&Math.abs(ct-e.clientX)<h.edit.drag.minMoveSize&&Math.abs(lt-e.clientY)<h.edit.drag.minMoveSize)return!0;if(pi=h.data.key.children,n("body").css("cursor","pointer"),p.dragFlag==0){if(r.apply(h.callback.beforeDrag,[h.treeId,c],!0)==!1)return ut(e),!0;for(o=0,et=c.length;o<et;o++)o==0&&(p.dragNodeShowBefore=[]),k=c[o],k.isParent&&k.open?(i.expandCollapseNode(h,k,!k.open),p.dragNodeShowBefore[k.tId]=!0):p.dragNodeShowBefore[k.tId]=!1;if(p.dragFlag=1,p.showHoverDom=!1,r.showIfameMask(h,!0),bt=!0,kt=-1,c.length>1)for(dt=c[0].parentTId?c[0].getParentNode()[pi]:u.getNodes(h),wt=[],o=0,et=dt.length;o<et;o++)if(p.dragNodeShowBefore[dt[o].tId]!==undefined&&(bt&&kt>-1&&kt+1!==o&&(bt=!1),wt.push(dt[o]),kt=o),c.length===wt.length){c=wt;break}for(bt&&(nt=c[0].getPreNode(),tt=c[c.length-1].getNextNode()),b=n("<ul class='zTreeDragUL'><\/ul>"),o=0,et=c.length;o<et;o++)if(k=c[o],k.editNameFlag=!1,i.selectNode(h,k,o>0),i.removeTreeDom(h,k),ht=n("<li id='"+k.tId+"_tmp'><\/li>"),ht.append(n("#"+k.tId+t.id.A).clone()),ht.css("padding","0"),ht.children("#"+k.tId+t.id.A).removeClass(t.node.CURSELECTED),b.append(ht),o==h.edit.drag.maxShowNodeNum-1){ht=n("<li id='"+k.tId+"_moretmp'><a>  ...  <\/a><\/li>");b.append(ht);break}b.attr("id",c[0].tId+t.id.UL+"_tmp");b.addClass(h.treeObj.attr("class"));b.appendTo("body");y=n("<span class='tmpzTreeMove_arrow'><\/span>");y.attr("id","zTreeMove_arrow_tmp");y.appendTo("body");h.treeObj.trigger(t.event.DRAG,[e,h.treeId,c])}if(p.dragFlag==1){l&&y.attr("id")==e.target.id&&a&&e.clientX+w.scrollLeft()+2>n("#"+a+t.id.A,l).offset().left?(ei=n("#"+a+t.id.A,l),e.target=ei.length>0?ei.get(0):e.target):l&&(l.removeClass(t.node.TMPTARGET_TREE),a&&n("#"+a+t.id.A,l).removeClass(t.node.TMPTARGET_NODE+"_"+t.move.TYPE_PREV).removeClass(t.node.TMPTARGET_NODE+"_"+f.move.TYPE_NEXT).removeClass(t.node.TMPTARGET_NODE+"_"+f.move.TYPE_INNER));l=null;a=null;d=!1;s=h;st=u.getSettings();for(at in st)st[at].treeId&&st[at].edit.enable&&st[at].treeId!=h.treeId&&(e.target.id==st[at].treeId||n(e.target).parents("#"+st[at].treeId).length>0)&&(d=!0,s=st[at]);var gt=w.scrollTop(),oi=w.scrollLeft(),ni=s.treeObj.offset(),ir=s.treeObj.get(0).scrollHeight,rr=s.treeObj.get(0).scrollWidth,si=e.clientY+gt-ni.top,hi=s.treeObj.height()+ni.top-e.clientY-gt,ci=e.clientX+oi-ni.left,li=s.treeObj.width()+ni.left-e.clientX-oi,wi=si<h.edit.drag.borderMax&&si>h.edit.drag.borderMin,bi=hi<h.edit.drag.borderMax&&hi>h.edit.drag.borderMin,ki=ci<h.edit.drag.borderMax&&ci>h.edit.drag.borderMin,di=li<h.edit.drag.borderMax&&li>h.edit.drag.borderMin,ur=si>h.edit.drag.borderMin&&hi>h.edit.drag.borderMin&&ci>h.edit.drag.borderMin&&li>h.edit.drag.borderMin,fr=wi&&s.treeObj.scrollTop()<=0,er=bi&&s.treeObj.scrollTop()+s.treeObj.height()+10>=ir,or=ki&&s.treeObj.scrollLeft()<=0,sr=di&&s.treeObj.scrollLeft()+s.treeObj.width()+10>=rr;if(e.target.id&&s.treeObj.find("#"+e.target.id).length>0){for(ft=e.target;ft&&ft.tagName&&!r.eqs(ft.tagName,"li")&&ft.id!=s.treeId;)ft=ft.parentNode;for(ti=!0,o=0,et=c.length;o<et;o++)if(k=c[o],ft.id===k.tId){ti=!1;break}else if(n("#"+k.tId).find("#"+ft.id).length>0){ti=!1;break}ti&&e.target.id&&(e.target.id==ft.id+t.id.A||n(e.target).parents("#"+ft.id+t.id.A).length>0)&&(l=n(ft),a=ft.id)}if(k=c[0],ur&&(e.target.id==s.treeId||n(e.target).parents("#"+s.treeId).length>0)&&(!l&&(e.target.id==s.treeId||fr||er||or||sr)&&(d||!d&&k.parentTId)&&(l=s.treeObj),wi?s.treeObj.scrollTop(s.treeObj.scrollTop()-10):bi&&s.treeObj.scrollTop(s.treeObj.scrollTop()+10),ki?s.treeObj.scrollLeft(s.treeObj.scrollLeft()-10):di&&s.treeObj.scrollLeft(s.treeObj.scrollLeft()+10),l&&l!=s.treeObj&&l.offset().left<s.treeObj.offset().left&&s.treeObj.scrollLeft(s.treeObj.scrollLeft()+l.offset().left-s.treeObj.offset().left)),b.css({top:e.clientY+gt+3+"px",left:e.clientX+oi+3+"px"}),vt=0,yt=0,l&&l.attr("id")!=s.treeId){var g=a==null?null:u.getNodeCache(s,a),ai=e.ctrlKey&&h.edit.drag.isMove&&h.edit.drag.isCopy||!h.edit.drag.isMove&&h.edit.drag.isCopy,hr=!!(nt&&a===nt.tId),cr=!!(tt&&a===tt.tId),lr=k.parentTId&&k.parentTId==a,ii=(ai||!cr)&&r.apply(s.edit.drag.prev,[s.treeId,c,g],!!s.edit.drag.prev),ri=(ai||!hr)&&r.apply(s.edit.drag.next,[s.treeId,c,g],!!s.edit.drag.next),vi=(ai||!lr)&&!(s.data.keep.leaf&&!g.isParent)&&r.apply(s.edit.drag.inner,[s.treeId,c,g],!!s.edit.drag.inner);if(ii||ri||vi){var pt=n("#"+a+t.id.A,l),gi=g.isLastNode?null:n("#"+g.getNextNode().tId+t.id.A,l.next()),ui=pt.offset().top,ar=pt.offset().left,nr=ii?vi?.25:ri?.5:1:-1,tr=ri?vi?.75:ii?.5:0:-1,fi=(e.clientY+gt-ui)/pt.height();(nr==1||fi<=nr&&fi>=-.2)&&ii?(vt=1-y.width(),yt=ui-y.height()/2,v=t.move.TYPE_PREV):(tr==0||fi>=tr&&fi<=1.2)&&ri?(vt=1-y.width(),yt=gi==null||g.isParent&&g.open?ui+pt.height()-y.height()/2:gi.offset().top-y.height()/2,v=t.move.TYPE_NEXT):(vt=5-y.width(),yt=ui,v=t.move.TYPE_INNER);y.css({display:"block",top:yt+"px",left:ar+vt+"px"});pt.addClass(t.node.TMPTARGET_NODE+"_"+v);(it!=a||rt!=v)&&(ot=(new Date).getTime());g&&g.isParent&&v==t.move.TYPE_INNER&&(yi=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==g.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===g.tId&&(yi=!1),yi&&(window.zTreeMoveTimer=setTimeout(function(){v==t.move.TYPE_INNER&&g&&g.isParent&&!g.open&&(new Date).getTime()-ot>s.edit.drag.autoOpenTime&&r.apply(s.callback.beforeDragOpen,[s.treeId,g],!0)&&(i.switchNode(s,g),s.edit.drag.autoExpandTrigger&&s.treeObj.trigger(t.event.EXPAND,[s.treeId,g]))},s.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=g.tId))}else l=null,a="",v=t.move.TYPE_INNER,y.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}else v=t.move.TYPE_INNER,l&&r.apply(s.edit.drag.inner,[s.treeId,c,null],!!s.edit.drag.inner)?l.addClass(t.node.TMPTARGET_TREE):l=null,y.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);it=a;rt=v}return!1}function ut(e){var g,ft,tt,nt,k,o;if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),it=null,rt=null,w.unbind("mousemove",st),w.unbind("mouseup",ut),w.unbind("selectstart",ht),n("body").css("cursor","auto"),l&&(l.removeClass(t.node.TMPTARGET_TREE),a&&n("#"+a+t.id.A,l).removeClass(t.node.TMPTARGET_NODE+"_"+t.move.TYPE_PREV).removeClass(t.node.TMPTARGET_NODE+"_"+f.move.TYPE_NEXT).removeClass(t.node.TMPTARGET_NODE+"_"+f.move.TYPE_INNER)),r.showIfameMask(h,!1),p.showHoverDom=!0,p.dragFlag!=0){for(p.dragFlag=0,g=0,ft=c.length;g<ft;g++)tt=c[g],tt.isParent&&p.dragNodeShowBefore[tt.tId]&&!tt.open&&(i.expandCollapseNode(h,tt,!tt.open),delete p.dragNodeShowBefore[tt.tId]);if(b&&b.remove(),y&&y.remove(),nt=e.ctrlKey&&h.edit.drag.isMove&&h.edit.drag.isCopy||!h.edit.drag.isMove&&h.edit.drag.isCopy,!nt&&l&&a&&c[0].parentTId&&a==c[0].parentTId&&v==t.move.TYPE_INNER&&(l=null),l){if(k=a==null?null:u.getNodeCache(s,a),r.apply(h.callback.beforeDrop,[s.treeId,c,k,v,nt],!0)==!1)return;o=nt?r.clone(c):c;function et(){if(d){if(!nt)for(var r=0,u=c.length;r<u;r++)i.removeNode(h,c[r]);if(v==t.move.TYPE_INNER)i.addNodes(s,k,o);else if(i.addNodes(s,k.getParentNode(),o),v==t.move.TYPE_PREV)for(r=0,u=o.length;r<u;r++)i.moveNode(s,k,o[r],v,!1);else for(r=-1,u=o.length-1;r<u;u--)i.moveNode(s,k,o[u],v,!1)}else if(nt&&v==t.move.TYPE_INNER)i.addNodes(s,k,o);else if(nt&&i.addNodes(s,k.getParentNode(),o),v!=t.move.TYPE_NEXT)for(r=0,u=o.length;r<u;r++)i.moveNode(s,k,o[r],v,!1);else for(r=-1,u=o.length-1;r<u;u--)i.moveNode(s,k,o[u],v,!1);for(r=0,u=o.length;r<u;r++)i.selectNode(s,o[r],r>0);n("#"+o[0].tId).focus().blur();h.treeObj.trigger(t.event.DROP,[e,s.treeId,o,k,v,nt])}v==t.move.TYPE_INNER&&r.canAsync(s,k)?i.asyncNode(s,k,!1,et):et()}else{for(g=0,ft=c.length;g<ft;g++)i.selectNode(s,c[g],g>0);h.treeObj.trigger(t.event.DROP,[e,h.treeId,c,null,null,null])}}}function ht(){return!1}var k,ft,h=u.getSetting(e.data.treeId),p=u.getRoot(h);if(e.button==2||!h.edit.enable||!h.edit.drag.isCopy&&!h.edit.drag.isMove)return!0;var et=e.target,g=u.getRoot(h).curSelectedList,c=[];if(u.isSelectedNode(h,o))for(k=0,ft=g.length;k<ft;k++){if(g[k].editNameFlag&&r.eqs(et.tagName,"input")&&et.getAttribute("treeNode"+t.id.INPUT)!==null)return!0;if(c.push(g[k]),c[0].parentTId!==g[k].parentTId){c=[o];break}}else c=[o];i.editNodeBlur=!0;i.cancelCurEditNode(h,null,!0);var w=n(document),b,y,l,d=!1,s=h,nt,tt,it=null,rt=null,a=null,v=t.move.TYPE_INNER,ct=e.clientX,lt=e.clientY,ot=(new Date).getTime();return r.uCanDo(h)&&w.bind("mousemove",st),w.bind("mouseup",ut),w.bind("selectstart",ht),e.preventDefault&&e.preventDefault(),!0}},tt={getAbs:function(n){var t=n.getBoundingClientRect();return[t.left,t.top]},inputFocus:function(n){n.get(0)&&(n.focus(),r.setCursorPosition(n.get(0),n.val().length))},inputSelect:function(n){n.get(0)&&(n.focus(),n.select())},setCursorPosition:function(n,t){if(n.setSelectionRange)n.focus(),n.setSelectionRange(t,t);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",t);i.select()}},showIfameMask:function(t,i){for(var e=u.getRoot(t),o,f,h;e.dragMaskList.length>0;)e.dragMaskList[0].remove(),e.dragMaskList.shift();if(i)for(o=n("iframe"),f=0,h=o.length;f<h;f++){var s=o.get(f),c=r.getAbs(s),l=n("<div id='zTreeMask_"+f+"' class='zTreeMask' style='top:"+c[1]+"px; left:"+c[0]+"px; width:"+s.offsetWidth+"px; height:"+s.offsetHeight+"px;'><\/div>");l.appendTo("body");e.dragMaskList.push(l)}}},it={addEditBtn:function(u,f){if(!f.editNameFlag&&!(n("#"+f.tId+t.id.EDIT).length>0)&&r.apply(u.edit.showRenameBtn,[u.treeId,f],u.edit.showRenameBtn)){var e=n("#"+f.tId+t.id.A),o="<span class='button edit' id='"+f.tId+t.id.EDIT+"' title='"+r.apply(u.edit.renameTitle,[u.treeId,f],u.edit.renameTitle)+"' treeNode"+t.id.EDIT+" style='display:none;'><\/span>";e.append(o);n("#"+f.tId+t.id.EDIT).bind("click",function(){return!r.uCanDo(u)||r.apply(u.callback.beforeEditName,[u.treeId,f],!0)==!1?!1:(i.editNode(u,f),!1)}).show()}},addRemoveBtn:function(u,f){if(!f.editNameFlag&&!(n("#"+f.tId+t.id.REMOVE).length>0)&&r.apply(u.edit.showRemoveBtn,[u.treeId,f],u.edit.showRemoveBtn)){var e=n("#"+f.tId+t.id.A),o="<span class='button remove' id='"+f.tId+t.id.REMOVE+"' title='"+r.apply(u.edit.removeTitle,[u.treeId,f],u.edit.removeTitle)+"' treeNode"+t.id.REMOVE+" style='display:none;'><\/span>";e.append(o);n("#"+f.tId+t.id.REMOVE).bind("click",function(){return!r.uCanDo(u)||r.apply(u.callback.beforeRemove,[u.treeId,f],!0)==!1?!1:(i.removeNode(u,f),u.treeObj.trigger(t.event.REMOVE,[u.treeId,f]),!1)}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(n,t){u.getRoot(n).showHoverDom&&(t.isHover=!0,n.edit.enable&&(i.addEditBtn(n,t),i.addRemoveBtn(n,t)),r.apply(n.view.addHoverDom,[n.treeId,t]))},cancelCurEditNode:function(f,e){var s=u.getRoot(f),a=f.data.key.name,o=s.curEditNode,h,c,l;if(o){if(h=s.curEditInput,c=e?e:h.val(),e||r.apply(f.callback.beforeRename,[f.treeId,o,c],!0)!==!1)o[a]=c?c:h.val(),e||f.treeObj.trigger(t.event.RENAME,[f.treeId,o]);else return!1;l=n("#"+o.tId+t.id.A);l.removeClass(t.node.CURSELECTED_EDIT);h.unbind();i.setNodeName(f,o);o.editNameFlag=!1;s.curEditNode=null;s.curEditInput=null;i.selectNode(f,o,!1)}return s.noSelection=!0,!0},editNode:function(f,e){var s=u.getRoot(f),h,o;if(i.editNodeBlur=!1,u.isSelectedNode(f,e)&&s.curEditNode==e&&e.editNameFlag){setTimeout(function(){r.inputFocus(s.curEditInput)},0);return}h=f.data.key.name;e.editNameFlag=!0;i.removeTreeDom(f,e);i.cancelCurEditNode(f);i.selectNode(f,e,!1);n("#"+e.tId+t.id.SPAN).html("<input type=text class='rename' id='"+e.tId+t.id.INPUT+"' treeNode"+t.id.INPUT+" >");o=n("#"+e.tId+t.id.INPUT);o.attr("value",e[h]);f.edit.editNameSelectAll?r.inputSelect(o):r.inputFocus(o);o.bind("blur",function(){i.editNodeBlur||i.cancelCurEditNode(f)}).bind("keydown",function(n){n.keyCode=="13"?(i.editNodeBlur=!0,i.cancelCurEditNode(f,null,!0)):n.keyCode=="27"&&i.cancelCurEditNode(f,e[h])}).bind("click",function(){return!1}).bind("dblclick",function(){return!1});n("#"+e.tId+t.id.A).addClass(t.node.CURSELECTED_EDIT);s.curEditInput=o;s.noSelection=!1;s.curEditNode=e},moveNode:function(r,f,e,o,s,h){var tt=u.getRoot(r),c=r.data.key.children,l,g,p,a,b,rt,w;if(f!=e&&(!r.data.keep.leaf||!f||f.isParent||o!=t.move.TYPE_INNER)){l=e.parentTId?e.getParentNode():tt;g=f===null||f==tt;g&&f===null&&(f=tt);g&&(o=t.move.TYPE_INNER);p=f.parentTId?f.getParentNode():tt;o!=t.move.TYPE_PREV&&o!=t.move.TYPE_NEXT&&(o=t.move.TYPE_INNER);o==t.move.TYPE_INNER&&(g?e.parentTId=null:(f.isParent||(f.isParent=!0,f.open=!!f.open,i.setNodeLineIcos(r,f)),e.parentTId=f.tId));g?(a=r.treeObj,b=a):(h||o!=t.move.TYPE_INNER?h||i.expandCollapseNode(r,f.getParentNode(),!0,!1):i.expandCollapseNode(r,f,!0,!1),a=n("#"+f.tId),b=n("#"+f.tId+t.id.UL),!a.get(0)||b.get(0)||(rt=[],i.makeUlHtml(r,f,rt,""),a.append(rt.join(""))),b=n("#"+f.tId+t.id.UL));w=n("#"+e.tId);w.get(0)?a.get(0)||w.remove():w=i.appendNodes(r,e.level,[e],null,!1,!0).join("");b.get(0)&&o==t.move.TYPE_INNER?b.append(w):a.get(0)&&o==t.move.TYPE_PREV?a.before(w):a.get(0)&&o==t.move.TYPE_NEXT&&a.after(w);var v,it,k=-1,nt=0,d=null,y=null,ut=e.level;if(e.isFirstNode)k=0,l[c].length>1&&(d=l[c][1],d.isFirstNode=!0);else if(e.isLastNode)k=l[c].length-1,d=l[c][k-1],d.isLastNode=!0;else for(v=0,it=l[c].length;v<it;v++)if(l[c][v].tId==e.tId){k=v;break}if(k>=0&&l[c].splice(k,1),o!=t.move.TYPE_INNER)for(v=0,it=p[c].length;v<it;v++)p[c][v].tId==f.tId&&(nt=v);if(o==t.move.TYPE_INNER?(f[c]||(f[c]=[]),f[c].length>0&&(y=f[c][f[c].length-1],y.isLastNode=!1),f[c].splice(f[c].length,0,e),e.isLastNode=!0,e.isFirstNode=f[c].length==1):f.isFirstNode&&o==t.move.TYPE_PREV?(p[c].splice(nt,0,e),y=f,y.isFirstNode=!1,e.parentTId=f.parentTId,e.isFirstNode=!0,e.isLastNode=!1):f.isLastNode&&o==t.move.TYPE_NEXT?(p[c].splice(nt+1,0,e),y=f,y.isLastNode=!1,e.parentTId=f.parentTId,e.isFirstNode=!1,e.isLastNode=!0):(o==t.move.TYPE_PREV?p[c].splice(nt,0,e):p[c].splice(nt+1,0,e),e.parentTId=f.parentTId,e.isFirstNode=!1,e.isLastNode=!1),u.fixPIdKeyValue(r,e),u.setSonNodeLevel(r,e.getParentNode(),e),i.setNodeLineIcos(r,e),i.repairNodeLevelClass(r,e,ut),!r.data.keep.parent&&l[c].length<1){l.isParent=!1;l.open=!1;var ft=n("#"+l.tId+t.id.UL),et=n("#"+l.tId+t.id.SWITCH),ot=n("#"+l.tId+t.id.ICON);i.replaceSwitchClass(l,et,t.folder.DOCU);i.replaceIcoClass(l,ot,t.folder.DOCU);ft.css("display","none")}else d&&i.setNodeLineIcos(r,d);y&&i.setNodeLineIcos(r,y);!!r.check&&r.check.enable&&i.repairChkClass&&(i.repairChkClass(r,l),i.repairParentChkClassWithSelf(r,l),l!=e.parent&&i.repairParentChkClassWithSelf(r,e));h||i.expandCollapseParentNode(r,e.getParentNode(),!0,s)}},removeEditBtn:function(i){n("#"+i.tId+t.id.EDIT).unbind().remove()},removeRemoveBtn:function(i){n("#"+i.tId+t.id.REMOVE).unbind().remove()},removeTreeDom:function(n,t){t.isHover=!1;i.removeEditBtn(t);i.removeRemoveBtn(t);r.apply(n.view.removeHoverDom,[n.treeId,t])},repairNodeLevelClass:function(i,r,u){if(u!==r.level){var o=n("#"+r.tId),s=n("#"+r.tId+t.id.A),h=n("#"+r.tId+t.id.UL),f="level"+u,e="level"+r.level;o.removeClass(f);o.addClass(e);s.removeClass(f);s.addClass(e);h.removeClass(f);h.addClass(e)}}},rt={tools:tt,view:it,event:{},data:nt},s,h,v,c,l,a;n.extend(!0,n.fn.zTree.consts,f);n.extend(!0,n.fn.zTree._z,rt);var e=n.fn.zTree,r=e._z.tools,t=e.consts,i=e._z.view,u=e._z.data,ut=e._z.event;u.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDrop:null,onRename:null}});u.addInitBind(w);u.addInitUnBind(b);u.addInitCache(p);u.addInitNode(d);u.addInitProxy(k);u.addInitRoot(y);u.addZTreeTools(g);s=i.cancelPreSelectedNode;i.cancelPreSelectedNode=function(n,t){for(var f=u.getRoot(n).curSelectedList,r=0,e=f.length;r<e;r++)if((!t||t===f[r])&&(i.removeTreeDom(n,f[r]),t))break;s&&s.apply(i,arguments)};h=i.createNodes;i.createNodes=function(n,t,r,u){(h&&h.apply(i,arguments),r)&&i.repairParentChkClassWithSelf&&i.repairParentChkClassWithSelf(n,u)};v=i.makeNodeUrl;i.makeNodeUrl=function(n){return n.edit.enable?null:v.apply(i,arguments)};c=i.removeNode;i.removeNode=function(n,t){var r=u.getRoot(n);r.curEditNode===t&&(r.curEditNode=null);c&&c.apply(i,arguments)};l=i.selectNode;i.selectNode=function(n,t){var r=u.getRoot(n);return u.isSelectedNode(n,t)&&r.curEditNode==t&&t.editNameFlag?!1:(l&&l.apply(i,arguments),i.addHoverDom(n,t),!0)};a=r.uCanDo;r.uCanDo=function(n,t){var f=u.getRoot(n);return t&&(r.eqs(t.type,"mouseover")||r.eqs(t.type,"mouseout")||r.eqs(t.type,"mousedown")||r.eqs(t.type,"mouseup"))?!0:!f.curEditNode&&(a?a.apply(i,arguments):!0)}}(t),t});define("gallery/ztree/3.5.3/zTree.css",[],function(){function n(n){var t=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(t);t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}n('.ztree *{padding:0;margin:0;font-size:12px;font-family:Verdana,Arial,Helvetica,AppleGothic,sans-serif}.ztree{margin:0;padding:5px;color:#333}.ztree li{padding:0;margin:0;list-style:none;line-height:14px;text-align:left;white-space:nowrap;outline:0}.ztree li ul{margin:0;padding:0 0 0 18px}.ztree li ul.line{background:url(/scripts/gallery/ztree/3.5.3/2MFyKU1LW9.gif) 0 0 repeat-y}.ztree li a{padding:1px 3px 0 0;margin:0;cursor:pointer;height:17px;color:#333;background-color:transparent;text-decoration:none;vertical-align:top;display:inline-block}.ztree li a:hover{text-decoration:underline}.ztree li a.curSelectedNode{padding-top:0;background-color:#A8CFFF;color:#000;height:16px;border:1px #3987C9 solid;opacity:.8}.ztree li a.curSelectedNode_Edit{padding-top:0;background-color:#FFE6B0;color:#000;height:16px;border:1px #FFB951 solid;opacity:.8}.ztree li a.tmpTargetNode_inner{padding-top:0;background-color:#316AC5;color:#fff;height:16px;border:1px #316AC5 solid;opacity:.8;filter:alpha(opacity=80)}.ztree li a.tmpTargetNode_prev{}.ztree li a.tmpTargetNode_next{}.ztree li a input.rename{height:14px;width:80px;padding:0;margin:0;font-size:12px;border:1px #7EC4CC solid;*border:0}.ztree li span{line-height:16px;margin-right:2px}.ztree li span.button{line-height:0;margin:0;width:16px;height:16px;display:inline-block;vertical-align:middle;border:0 none;cursor:pointer;outline:0;background-color:transparent;background-repeat:no-repeat;background-attachment:scroll;background-image:url("/scripts/gallery/ztree/3.5.3/2MFzqnrx4P.png");*background-image:url("/scripts/gallery/ztree/3.5.3/2MFzMNFUUn.gif")}.ztree li span.button.chk{width:13px;height:13px;margin:0 3px 0 0;cursor:auto}.ztree li span.button.chk.checkbox_false_full{background-position:0 0}.ztree li span.button.chk.checkbox_false_full_focus{background-position:0 -14px}.ztree li span.button.chk.checkbox_false_part{background-position:0 -28px}.ztree li span.button.chk.checkbox_false_part_focus{background-position:0 -42px}.ztree li span.button.chk.checkbox_false_disable{background-position:0 -56px}.ztree li span.button.chk.checkbox_true_full{background-position:-14px 0}.ztree li span.button.chk.checkbox_true_full_focus{background-position:-14px -14px}.ztree li span.button.chk.checkbox_true_part{background-position:-14px -28px}.ztree li span.button.chk.checkbox_true_part_focus{background-position:-14px -42px}.ztree li span.button.chk.checkbox_true_disable{background-position:-14px -56px}.ztree li span.button.chk.radio_false_full{background-position:-28px 0}.ztree li span.button.chk.radio_false_full_focus{background-position:-28px -14px}.ztree li span.button.chk.radio_false_part{background-position:-28px -28px}.ztree li span.button.chk.radio_false_part_focus{background-position:-28px -42px}.ztree li span.button.chk.radio_false_disable{background-position:-28px -56px}.ztree li span.button.chk.radio_true_full{background-position:-42px 0}.ztree li span.button.chk.radio_true_full_focus{background-position:-42px -14px}.ztree li span.button.chk.radio_true_part{background-position:-42px -28px}.ztree li span.button.chk.radio_true_part_focus{background-position:-42px -42px}.ztree li span.button.chk.radio_true_disable{background-position:-42px -56px}.ztree li span.button.switch{width:18px;height:18px}.ztree li span.button.root_open{background-position:-92px -54px}.ztree li span.button.root_close{background-position:-74px -54px}.ztree li span.button.roots_open{background-position:-92px 0}.ztree li span.button.roots_close{background-position:-74px 0}.ztree li span.button.center_open{background-position:-92px -18px}.ztree li span.button.center_close{background-position:-74px -18px}.ztree li span.button.bottom_open{background-position:-92px -36px}.ztree li span.button.bottom_close{background-position:-74px -36px}.ztree li span.button.noline_open{background-position:-92px -72px}.ztree li span.button.noline_close{background-position:-74px -72px}.ztree li span.button.root_docu{background:0}.ztree li span.button.roots_docu{background-position:-56px 0}.ztree li span.button.center_docu{background-position:-56px -18px}.ztree li span.button.bottom_docu{background-position:-56px -36px}.ztree li span.button.noline_docu{background:0}.ztree li span.button.ico_open{margin-right:2px;background-position:-110px -16px;vertical-align:top;*vertical-align:middle}.ztree li span.button.ico_close{margin-right:2px;background-position:-110px 0;vertical-align:top;*vertical-align:middle}.ztree li span.button.ico_docu{background-image:url("/scripts/gallery/ztree/3.5.3/2M0W1oyhwb.png");background-repeat:no-repeat;margin-right:2px;background-position:-660px 0;vertical-align:top;*vertical-align:middle}.ztree li span.button.edit{margin-right:2px;background-position:-110px -48px;vertical-align:top;*vertical-align:middle}.ztree li span.button.remove{margin-right:2px;background-position:-110px -64px;vertical-align:top;*vertical-align:middle}.ztree li span.button.ico_loading{margin-right:2px;background:url(/scripts/gallery/ztree/3.5.3/2MFyt3as9t.gif) no-repeat scroll 0 0 transparent;vertical-align:top;*vertical-align:middle}ul.tmpTargetzTree{background-color:#FFE6B0;opacity:.8;filter:alpha(opacity=80)}span.tmpzTreeMove_arrow{width:16px;height:16px;display:inline-block;padding:0;margin:2px 0 0 1px;border:0 none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-attachment:scroll;background-position:-110px -80px;background-image:url("/scripts/gallery/ztree/3.5.3/2MFzqnrx4P.png");*background-image:url("/scripts/gallery/ztree/3.5.3/2MFzMNFUUn.gif")}ul.ztree.zTreeDragUL{margin:0;padding:0;position:absolute;width:auto;height:auto;overflow:hidden;background-color:#cfcfcf;border:1px #00B83F dotted;opacity:.8;filter:alpha(opacity=80)}.zTreeMask{z-index:10000;background-color:#cfcfcf;opacity:.0;filter:alpha(opacity=0);position:absolute}')});
/*
//# sourceMappingURL=ztree-debug.min.js.map
*/